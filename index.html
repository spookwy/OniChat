<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Welcome - OniChat</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
    <script src="script.js" defer></script>
</head>
<body>
    <!-- Loader overlay: logo + progress bar shown at startup -->
    <div id="loaderOverlay" class="loader-overlay" role="status" aria-hidden="false">
        <div class="loader-content">
            <div class="loader-logo logo-icon" id="loaderLogo" aria-hidden="true"></div>
            <div class="loader-progress" aria-hidden="true">
                <div class="loader-bar" id="loaderBar" style="width:0%"></div>
            </div>
            <div class="loader-percent" id="loaderPercent">0%</div>
        </div>
    </div>
    <!-- Анимированный фон с числами -->
    <div class="background-numbers" id="backgroundNumbers"></div>

    <!-- Плавающие частицы -->
    <div class="floating-particles" id="particles"></div>

    <!-- Главный контейнер -->
    <div class="container" id="loginContainer">
        <div class="glass-panel" id="glassPanel">
            <!-- Иконка Telegram -->
            <a href="https://t.me/OniChat_live" target="_blank" class="telegram-icon">
                <img src="telegram.png" alt="Telegram" />
            </a>

            <!-- Language switcher (top-right of main menu) -->
            <button id="langButton" class="lang-button" title="Сменить язык / Switch language" aria-label="Switch language">
                <img src="logos/language.png" alt="Language" class="lang-icon">
                <span class="lang-label">RUS</span>
            </button>

            <!-- Логотип -->
            <div class="logo">
                <!-- Logo will use logo.png as a mask and be tinted via CSS variable -- current-accent -->
                <div class="logo-icon" id="logoIcon" role="img" aria-label="Logo"></div>
                <h1 class="title">Добро пожаловать</h1>
                <p class="subtitle">Добро пожаловать в будущее</p>
            </div>

            <!-- Поле имени пользователя -->
            <div class="input-group">
                <label class="input-label">Имя пользователя 
                    <img src="logos/user.png" alt="User" class="user-input-icon label-user-icon">
                </label>
                <input type="text" class="input-field" id="usernameInput" placeholder="Введите ваше имя" value="Guest">
            </div>

            <!-- Выбор цвета -->
            <div class="color-picker-group">
                <label class="input-label">Выберите цветовую схему</label>
                <div class="color-options">
                    <div class="color-option color-green selected" data-color="green"></div>
                    <div class="color-option color-blue" data-color="blue"></div>
                    <div class="color-option color-purple" data-color="purple"></div>
                    <div class="color-option color-red" data-color="red"></div>
                    <div class="color-option color-yellow" data-color="yellow"></div>
                </div>
                <div class="color-options-row2">
                    <div class="color-option color-cyan" data-color="cyan"></div>
                    <div class="color-option color-pink" data-color="pink"></div>
                    <div class="color-option color-orange" data-color="orange"></div>
                    <div class="color-option color-lime" data-color="lime"></div>
                </div>
            </div>

            <!-- Кнопка входа -->
            <button class="enter-button" id="enterButton">Войти в систему <img src="logos/enterblack.png" alt="Enter" class="enter-button-icon"></button>
        </div>
    </div>

    <!-- Чат интерфейс -->
    <div class="chat-container" id="chatContainer">
        <div class="chat-header">
            <!-- Use the same logo mask for avatar so it matches the main logo -->
            <div class="user-avatar logo-icon" id="userAvatar" role="img" aria-label="User logo"></div>
            <div class="user-info">
                <h3 id="chatUsername">Guest</h3>
                <p id="userStatus">Онлайн</p>
            </div>
            <!-- Session timer (centered) -->
            <div id="sessionTimer" class="session-timer">
                <span class="session-icon" aria-hidden="true"></span>
                <span class="session-time">00:00</span>
            </div>
            <!-- Live online counter + logout -->
            <button class="logout-button" id="logoutButton" title="Выйти">
                <img src="logos/exit.png" alt="Exit" class="logout-icon">
            </button>
            <div class="online-indicator" id="onlineIndicator"><span class="online-icon" aria-hidden="true"></span> Онлайн: <span id="onlineCount">1</span></div>
        </div>
        
        <div class="chat-messages" id="chatMessages">
            <div class="message system">
                <p class="message-text">Добро пожаловать в чат! Начните общение...</p>
            </div>
        </div>
        
        <div class="chat-input">
            <input type="text" class="chat-input-field" id="messageInput" placeholder="Введите сообщение...">
            <button class="send-button" id="sendButton"><img src="logos/send.png" alt="Send" class="send-icon"></button>
        </div>
    </div>

    <!-- Панель статистики -->
    <div class="stats-panel">
        <h2 class="stats-title">Статистика <span class="stats-h2-icon" aria-hidden="true"></span></h2>
        <div class="stat-item">
            <img src="logos/chat.png" alt="Chat Icon" class="stat-icon">
            <p>Всего сообщений в чате: <span id="totalMessages">0</span></p>
        </div>
        <div class="stat-item">
            <img src="logos/online.png" alt="Online Icon" class="stat-icon">
            <p>Рекордный онлайн: <span id="recordOnline">0</span></p>
        </div>
        <div class="stat-item">
            <img src="logos/enter.png" alt="Enter Icon" class="stat-icon">
            <p>Всего заходов в чат: <span id="totalVisits">0</span></p>
        </div>
    </div>
</body>
</html>